<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>練習備忘</title>

    <style>

        body {background-image: url("background.png");
               background-repeat: no-repeat;
               background-size: 80%;
               font-family: Microsoft JhengHei, Arial, Helvetica, sans-serif; 
        }

        #input {position: fixed;
                bottom: 6%; 
                right: 50%;
                text-align: center;
                font-size: 14px;
        }

        #write{width: 60%;
               border: 1px solid black;
               padding: 3px;
               margin: 5px;
        }
        #btn{background-color:rgb(195, 179, 253);
            border: none;
            color: rgb(33, 101, 105);
            padding: 3px;
            border-radius: 10px;
        }

        #btn:hover{background-color:rgb(132, 216, 255);
                   color: chocolate;
        }


        ul {display: inline-block;
            width: 20%;
            list-style-type: none;
            position: absolute;
            top: 3%;
            left: 27%;
            }
        li {font-size: 12px;
            padding: 10px;
        }
        a {text-decoration:none;
           background-color: rgb(243, 233, 224);
           color: rgb(68, 173, 7);
           padding: 5px;
           border-radius: 25px;
           }
        a:hover{background-color: rgb(243, 196, 151);
                color: rgb(153, 73, 8);
        }

 

    </style>
</head>
<body>
    <div id="input">
        <hr>
        <form>
            <input type="text" id="write" placeholder="建立備忘事項">
            <input type="button" id="btn" value="輸入事項">
        </form>
    </div>
    
    <div>
    <ul id="list"></ul>
    </div>

    <script>
        var Btn = document.getElementById('btn');
        var Note = document.getElementById('write');
        var Lists = document.getElementById('list');
        var data = JSON.parse(localStorage.getItem('doit')) || []; //從localStorage提取資料

        Btn.addEventListener('click',Keyin,false);                 //輸入內容
        
        Update(data);                                              //更新data陣列

        function Keyin(e){
            var Notes = Note.value;                                //取得值

            var Obj = {item : Notes};                              //建立成物件，加入陣列中
            data.push(Obj);

            Update(data);                                          //更新data陣列

            localStorage.setItem('doit',JSON.stringify(data));     //資料轉入localStorage
            

            Note.value = "";                                       //將輸入欄清空
            
        }

        function Update(){                                         //輸出網頁內容
            var str = '';
            for(var i = 0 ; i < data.length ; i++){
            str += '<li><a href="#" data-num=' + [i] +'>完成</a> ' + data[i].item + ' </li>';
            }
            Lists.innerHTML = str;
        }

        Lists.addEventListener('click',Del,false);                 //刪除內容

        function Del(e){
            if(e.target.nodeName == 'A'){
                var Delit = e.target.dataset.num;                  //取得li的data-num
                
                data.splice(Delit,1);                              //刪除這一個li

                localStorage.setItem('doit',JSON.stringify(data)); //資料轉入localStorage

                Update(data);                                      //更新data陣列
            }
        }

        Note.addEventListener('keydown',function(e){               //增加enter鍵輸入
            if(e.keyCode == 13){
                e.preventDefault(); 
                Keyin();
            }
        },false)

    </script>
</body>
</html>
